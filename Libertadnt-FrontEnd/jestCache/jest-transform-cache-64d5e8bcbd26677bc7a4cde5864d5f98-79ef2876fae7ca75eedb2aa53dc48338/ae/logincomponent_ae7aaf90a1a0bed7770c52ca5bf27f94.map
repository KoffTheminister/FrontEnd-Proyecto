{"version":3,"names":["cov_srgtig46x","actualCoverage","s","core_1","require","forms_1","forms_2","router_1","usuario_service_1","LogInComponent","constructor","service","router","route","f","bander","bandera","contrasenia","FormControl","Validators","required","cod_administrador","console","log","usuario","FormGroup","paramMap","subscribe","params","eToken","get","b","bandUsuario","validarUsuarios","enviarUsuario","postAdministrador","value","next","response","es_especial","sessionStorage","setItem","token","navigate","error","e","status","mensajeError","msg","toaster","exports","tslib_1","__decorate","Component","selector","standalone","imports","FormsModule","ReactiveFormsModule","template","UsuarioService","Router","ActivatedRoute"],"sources":["/home/tenet7750/tpdesarrollofe/Libertadnt-FrontEnd/src/app/log-in/log-in.component.ts"],"sourcesContent":["import { Component, OnChanges, SimpleChanges } from '@angular/core';\nimport { FormControl, FormGroup, ReactiveFormsModule, Validators } from '@angular/forms';\nimport { FormsModule } from '@angular/forms'; \nimport { RouterOutlet ,RouterLink, Route, Router, ActivatedRoute} from '@angular/router';\nimport { UsuarioService } from './usuario.service';\nimport { HttpErrorResponse } from '@angular/common/http';\n\n@Component({\n  selector: 'app-log-in',\n  standalone: true,\n  imports: [FormsModule,ReactiveFormsModule,],\n  templateUrl: './log-in.component.html',\n  styleUrl: './log-in.component.css'\n})\nexport class LogInComponent  { \n  usuario: FormGroup;\n  cod_administrador:FormControl;\n  contrasenia: FormControl;\n  bander = false;\n  toaster: any;\n  eToken: string | null | undefined;\n  constructor (private service : UsuarioService,private router:Router,private route: ActivatedRoute ){\n    this.contrasenia= new FormControl('',[Validators.required])\n    this.cod_administrador= new FormControl('',[Validators.required])\n    console.log(this.cod_administrador)\n    this.usuario = new FormGroup({\n      cod_administrador: this.cod_administrador,\n      contrasenia: this.contrasenia,\n    })\n    this.route.paramMap.subscribe(params => {\n      this.eToken = params.get('usuario')\n      if(this.eToken == 'noAutorizado'){\n        this.bandUsuario='noAutorizado';\n      } else if (this.eToken == 'expirado') {\n        this.bandUsuario='expirado'\n      }\n    })\n  }\n      \n\n  bandUsuario: string | undefined\n  bandera = ''\n  validarUsuarios(){\n    this.enviarUsuario()\n  console.log(this.bandUsuario)\n  console.log(this.bandera)\n  }\n  enviarUsuario(){\n    this.service.postAdministrador(this.usuario.value).subscribe({\n      next: (response)=> {\n        console.log(response)\n        if(!response.es_especial){\n          this.bandUsuario='encontrado';\n          this.bandera='menu'\n          sessionStorage.setItem(\"token\", response.token);\n          sessionStorage.setItem(\"usuario\", \"menu\");\n          this.router.navigate(['usuario/menu'])\n        }\n        if(response.es_especial){\n          this.bandUsuario ='encontrado'\n          this.bandera = \"menu-maestro\"\n          sessionStorage.setItem(\"token\", response.token);\n          sessionStorage.setItem(\"usuario\", \"maestro\");\n          this.router.navigate(['usuario/menu-maestro'])\n        }\n      },\n      error: (e)=> {\n        console.log(\"usuario no valido \")\n        console.log(e)\n        if(e.status==404){\n          this.bandUsuario='no encontrado';\n        }\n        if(e.status == 409){\n          this.bandUsuario='incorrecto'\n        }\n        if(e.status == 401){\n          this.bandUsuario='noAutorizado'\n        }\n        if(e.status == 403){\n          this.bandUsuario='expirado'\n        }\n      }\n    });\n  }\n  \n  mensajeError(e:HttpErrorResponse){\n    if(e.error.msg){\n      this.toaster.error(e.error.msg, \"error\");\n    }else{\n      this.toaster.error('ocurrio un error', 'error')\n    }\n  }\n\n\n\n\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAyCE;IAAAA,aAAA,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","ignoreList":[]}