2bdad9448692ab47e30aa763fd370076
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const testing_1 = require("@angular/common/http/testing");
const testing_2 = require("@angular/core/testing");
const reclusos_service_1 = require("./reclusos.service");
describe('ReclusoService tests', () => {
    let r_service;
    let controller;
    let nuevo_recluso = {
        "nombre": "Brittney",
        "apellido": "Spears",
        "dni": 2020752,
        "fecha_nac": "2004-01-01"
    };
    let unos_reclusos = [
        {
            "cod_recluso": 1,
            "nombre": "Juan",
            "apellido": "Macron",
            "dni": 2020202,
            "fecha_nac": "2004-01-01"
        },
        {
            "cod_recluso": 2,
            "nombre": "Estevan",
            "apellido": "Quito",
            "dni": 2020203,
            "fecha_nac": "2004-01-01"
        },
        {
            "cod_recluso": 3,
            "nombre": "Carlos",
            "apellido": "Fredicksen",
            "dni": 2020204,
            "fecha_nac": "2004-01-01"
        }
    ];
    beforeEach(async () => {
        testing_2.TestBed.configureTestingModule({
            imports: [
                testing_1.HttpClientTestingModule
            ],
            providers: [
                reclusos_service_1.ReclusosService,
            ]
        });
        r_service = testing_2.TestBed.inject(reclusos_service_1.ReclusosService);
        controller = testing_2.TestBed.inject(testing_1.HttpTestingController);
    });
    it('deberia crear un servicio', () => {
        expect(r_service).toBeTruthy();
    });
    it('deberia devolver un solo recluso', () => {
        let cod_recluso = 2;
        r_service.getOneRecluso(cod_recluso).subscribe(response => {
            let recluso = unos_reclusos[0];
            expect(recluso.nombre).toEqual('Juan');
            expect(recluso.apellido).toEqual('Macron');
        });
        const request = controller.expectOne("http://localhost:8080/reclusos/" + `${cod_recluso}`);
        request.flush(unos_reclusos[0]);
    });
    it('deberia devolver todos los reclusos', () => {
        r_service.getReclusos().subscribe(response => {
            expect(unos_reclusos.length).toBeGreaterThan(0);
        });
        const request = controller.expectOne("http://localhost:8080/reclusos");
        request.flush(unos_reclusos);
    });
    it('deberia crear un recluso', () => {
        // postRecluso(x:any){
        //   return this.http.post<any|JSON>("http://localhost:8080/reclusos/", x);
        // }
        r_service.postRecluso(nuevo_recluso).subscribe(response => {
            expect(response).toEqual(nuevo_recluso);
        });
        const request = controller.expectOne('http://localhost:8080/reclusos');
        expect(request.request.method).toBe('POST');
        expect(request.request.body).toEqual(nuevo_recluso);
        request.flush(nuevo_recluso);
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvdGVuZXQ3NzUwL3RwZGVzYXJyb2xsb2ZlL0xpYmVydGFkbnQtRnJvbnRFbmQvc3JjL2FwcC9yZWNsdXNvcy9yZWNsdXNvcy5zZXJ2aWNlLnNwZWMudHMiLCJtYXBwaW5ncyI6Ijs7QUFBQSwwREFBNkY7QUFDN0YsbURBQStDO0FBQy9DLHlEQUFvRDtBQUdwRCxRQUFRLENBQUMsc0JBQXNCLEVBQUUsR0FBRyxFQUFFO0lBQ2xDLElBQUksU0FBMEIsQ0FBQTtJQUM5QixJQUFJLFVBQWlDLENBQUE7SUFDckMsSUFBSSxhQUFhLEdBQUc7UUFDbEIsUUFBUSxFQUFFLFVBQVU7UUFDcEIsVUFBVSxFQUFFLFFBQVE7UUFDcEIsS0FBSyxFQUFFLE9BQU87UUFDZCxXQUFXLEVBQUUsWUFBWTtLQUMxQixDQUFBO0lBQ0QsSUFBSSxhQUFhLEdBQUc7UUFDbEI7WUFDRSxhQUFhLEVBQUUsQ0FBQztZQUNoQixRQUFRLEVBQUUsTUFBTTtZQUNoQixVQUFVLEVBQUUsUUFBUTtZQUNwQixLQUFLLEVBQUUsT0FBTztZQUNkLFdBQVcsRUFBRSxZQUFZO1NBQzFCO1FBQ0Q7WUFDRSxhQUFhLEVBQUUsQ0FBQztZQUNoQixRQUFRLEVBQUUsU0FBUztZQUNuQixVQUFVLEVBQUUsT0FBTztZQUNuQixLQUFLLEVBQUUsT0FBTztZQUNkLFdBQVcsRUFBRSxZQUFZO1NBQzFCO1FBQ0Q7WUFDRSxhQUFhLEVBQUUsQ0FBQztZQUNoQixRQUFRLEVBQUUsUUFBUTtZQUNsQixVQUFVLEVBQUUsWUFBWTtZQUN4QixLQUFLLEVBQUUsT0FBTztZQUNkLFdBQVcsRUFBRSxZQUFZO1NBQzFCO0tBQ0YsQ0FBQTtJQUVELFVBQVUsQ0FBQyxLQUFLLElBQUksRUFBRTtRQUNwQixpQkFBTyxDQUFDLHNCQUFzQixDQUFDO1lBQzNCLE9BQU8sRUFBRTtnQkFDTCxpQ0FBdUI7YUFDMUI7WUFDRCxTQUFTLEVBQUU7Z0JBQ1Qsa0NBQWU7YUFDaEI7U0FDSixDQUFDLENBQUE7UUFFRixTQUFTLEdBQUcsaUJBQU8sQ0FBQyxNQUFNLENBQUMsa0NBQWUsQ0FBQyxDQUFBO1FBQzNDLFVBQVUsR0FBRyxpQkFBTyxDQUFDLE1BQU0sQ0FBQywrQkFBcUIsQ0FBQyxDQUFBO0lBQ3BELENBQUMsQ0FBQyxDQUFBO0lBRUYsRUFBRSxDQUFDLDJCQUEyQixFQUFFLEdBQUcsRUFBRTtRQUNuQyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsVUFBVSxFQUFFLENBQUE7SUFDaEMsQ0FBQyxDQUFDLENBQUE7SUFFRixFQUFFLENBQUMsa0NBQWtDLEVBQUUsR0FBRyxFQUFFO1FBQzFDLElBQUksV0FBVyxHQUFHLENBQUMsQ0FBQTtRQUNuQixTQUFTLENBQUMsYUFBYSxDQUFDLFdBQVcsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUN4RCxJQUFJLE9BQU8sR0FBRyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUE7WUFDOUIsTUFBTSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUE7WUFDdEMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUE7UUFDNUMsQ0FBQyxDQUFDLENBQUE7UUFFRixNQUFNLE9BQU8sR0FBRyxVQUFVLENBQUMsU0FBUyxDQUFDLGlDQUFpQyxHQUFDLEdBQUcsV0FBVyxFQUFFLENBQUMsQ0FBQTtRQUN4RixPQUFPLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO0lBQ2pDLENBQUMsQ0FBQyxDQUFBO0lBRUYsRUFBRSxDQUFDLHFDQUFxQyxFQUFFLEdBQUcsRUFBRTtRQUM3QyxTQUFTLENBQUMsV0FBVyxFQUFFLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxFQUFFO1lBQzNDLE1BQU0sQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFBO1FBQ2pELENBQUMsQ0FBQyxDQUFBO1FBQ0YsTUFBTSxPQUFPLEdBQUcsVUFBVSxDQUFDLFNBQVMsQ0FBQyxnQ0FBZ0MsQ0FBQyxDQUFBO1FBQ3RFLE9BQU8sQ0FBQyxLQUFLLENBQUMsYUFBYSxDQUFDLENBQUE7SUFDOUIsQ0FBQyxDQUFDLENBQUE7SUFFRixFQUFFLENBQUMsMEJBQTBCLEVBQUUsR0FBRyxFQUFFO1FBQ2xDLHNCQUFzQjtRQUN0QiwyRUFBMkU7UUFDM0UsSUFBSTtRQUVKLFNBQVMsQ0FBQyxXQUFXLENBQUMsYUFBYSxDQUFDLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxFQUFFO1lBQ3hELE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLENBQUM7UUFDMUMsQ0FBQyxDQUFDLENBQUM7UUFFSCxNQUFNLE9BQU8sR0FBRyxVQUFVLENBQUMsU0FBUyxDQUFDLGdDQUFnQyxDQUFDLENBQUM7UUFDdkUsTUFBTSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQzVDLE1BQU0sQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUVwRCxPQUFPLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQyxDQUFDO0lBQy9CLENBQUMsQ0FBQyxDQUFBO0FBRU4sQ0FBQyxDQUFDLENBQUEiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL2hvbWUvdGVuZXQ3NzUwL3RwZGVzYXJyb2xsb2ZlL0xpYmVydGFkbnQtRnJvbnRFbmQvc3JjL2FwcC9yZWNsdXNvcy9yZWNsdXNvcy5zZXJ2aWNlLnNwZWMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSHR0cENsaWVudFRlc3RpbmdNb2R1bGUsIEh0dHBUZXN0aW5nQ29udHJvbGxlciB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwL3Rlc3RpbmcnXG5pbXBvcnQgeyBUZXN0QmVkIH0gZnJvbSBcIkBhbmd1bGFyL2NvcmUvdGVzdGluZ1wiXG5pbXBvcnQgeyBSZWNsdXNvc1NlcnZpY2UgfSBmcm9tICcuL3JlY2x1c29zLnNlcnZpY2UnXG5pbXBvcnQgeyBzZXJ2aWNlc1ZlcnNpb24gfSBmcm9tICd0eXBlc2NyaXB0JztcblxuZGVzY3JpYmUoJ1JlY2x1c29TZXJ2aWNlIHRlc3RzJywgKCkgPT4ge1xuICAgIGxldCByX3NlcnZpY2U6IFJlY2x1c29zU2VydmljZVxuICAgIGxldCBjb250cm9sbGVyOiBIdHRwVGVzdGluZ0NvbnRyb2xsZXJcbiAgICBsZXQgbnVldm9fcmVjbHVzbyA9IHtcbiAgICAgIFwibm9tYnJlXCI6IFwiQnJpdHRuZXlcIixcbiAgICAgIFwiYXBlbGxpZG9cIjogXCJTcGVhcnNcIixcbiAgICAgIFwiZG5pXCI6IDIwMjA3NTIsXG4gICAgICBcImZlY2hhX25hY1wiOiBcIjIwMDQtMDEtMDFcIlxuICAgIH1cbiAgICBsZXQgdW5vc19yZWNsdXNvcyA9IFtcbiAgICAgIHtcbiAgICAgICAgXCJjb2RfcmVjbHVzb1wiOiAxLFxuICAgICAgICBcIm5vbWJyZVwiOiBcIkp1YW5cIixcbiAgICAgICAgXCJhcGVsbGlkb1wiOiBcIk1hY3JvblwiLFxuICAgICAgICBcImRuaVwiOiAyMDIwMjAyLFxuICAgICAgICBcImZlY2hhX25hY1wiOiBcIjIwMDQtMDEtMDFcIlxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgXCJjb2RfcmVjbHVzb1wiOiAyLFxuICAgICAgICBcIm5vbWJyZVwiOiBcIkVzdGV2YW5cIixcbiAgICAgICAgXCJhcGVsbGlkb1wiOiBcIlF1aXRvXCIsXG4gICAgICAgIFwiZG5pXCI6IDIwMjAyMDMsXG4gICAgICAgIFwiZmVjaGFfbmFjXCI6IFwiMjAwNC0wMS0wMVwiXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBcImNvZF9yZWNsdXNvXCI6IDMsXG4gICAgICAgIFwibm9tYnJlXCI6IFwiQ2FybG9zXCIsXG4gICAgICAgIFwiYXBlbGxpZG9cIjogXCJGcmVkaWNrc2VuXCIsXG4gICAgICAgIFwiZG5pXCI6IDIwMjAyMDQsXG4gICAgICAgIFwiZmVjaGFfbmFjXCI6IFwiMjAwNC0wMS0wMVwiXG4gICAgICB9XG4gICAgXVxuXG4gICAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gICAgICBUZXN0QmVkLmNvbmZpZ3VyZVRlc3RpbmdNb2R1bGUoe1xuICAgICAgICAgIGltcG9ydHM6IFtcbiAgICAgICAgICAgICAgSHR0cENsaWVudFRlc3RpbmdNb2R1bGVcbiAgICAgICAgICBdLFxuICAgICAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICAgICAgUmVjbHVzb3NTZXJ2aWNlLFxuICAgICAgICAgIF1cbiAgICAgIH0pXG5cbiAgICAgIHJfc2VydmljZSA9IFRlc3RCZWQuaW5qZWN0KFJlY2x1c29zU2VydmljZSlcbiAgICAgIGNvbnRyb2xsZXIgPSBUZXN0QmVkLmluamVjdChIdHRwVGVzdGluZ0NvbnRyb2xsZXIpXG4gICAgfSlcblxuICAgIGl0KCdkZWJlcmlhIGNyZWFyIHVuIHNlcnZpY2lvJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KHJfc2VydmljZSkudG9CZVRydXRoeSgpXG4gICAgfSlcblxuICAgIGl0KCdkZWJlcmlhIGRldm9sdmVyIHVuIHNvbG8gcmVjbHVzbycsICgpID0+IHtcbiAgICAgIGxldCBjb2RfcmVjbHVzbyA9IDJcbiAgICAgIHJfc2VydmljZS5nZXRPbmVSZWNsdXNvKGNvZF9yZWNsdXNvKS5zdWJzY3JpYmUocmVzcG9uc2UgPT4ge1xuICAgICAgICBsZXQgcmVjbHVzbyA9IHVub3NfcmVjbHVzb3NbMF1cbiAgICAgICAgZXhwZWN0KHJlY2x1c28ubm9tYnJlKS50b0VxdWFsKCdKdWFuJylcbiAgICAgICAgZXhwZWN0KHJlY2x1c28uYXBlbGxpZG8pLnRvRXF1YWwoJ01hY3JvbicpXG4gICAgICB9KVxuXG4gICAgICBjb25zdCByZXF1ZXN0ID0gY29udHJvbGxlci5leHBlY3RPbmUoXCJodHRwOi8vbG9jYWxob3N0OjgwODAvcmVjbHVzb3MvXCIrYCR7Y29kX3JlY2x1c299YClcbiAgICAgIHJlcXVlc3QuZmx1c2godW5vc19yZWNsdXNvc1swXSlcbiAgICB9KVxuXG4gICAgaXQoJ2RlYmVyaWEgZGV2b2x2ZXIgdG9kb3MgbG9zIHJlY2x1c29zJywgKCkgPT4ge1xuICAgICAgcl9zZXJ2aWNlLmdldFJlY2x1c29zKCkuc3Vic2NyaWJlKHJlc3BvbnNlID0+IHtcbiAgICAgICAgZXhwZWN0KHVub3NfcmVjbHVzb3MubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMClcbiAgICAgIH0pXG4gICAgICBjb25zdCByZXF1ZXN0ID0gY29udHJvbGxlci5leHBlY3RPbmUoXCJodHRwOi8vbG9jYWxob3N0OjgwODAvcmVjbHVzb3NcIilcbiAgICAgIHJlcXVlc3QuZmx1c2godW5vc19yZWNsdXNvcylcbiAgICB9KVxuXG4gICAgaXQoJ2RlYmVyaWEgY3JlYXIgdW4gcmVjbHVzbycsICgpID0+IHtcbiAgICAgIC8vIHBvc3RSZWNsdXNvKHg6YW55KXtcbiAgICAgIC8vICAgcmV0dXJuIHRoaXMuaHR0cC5wb3N0PGFueXxKU09OPihcImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9yZWNsdXNvcy9cIiwgeCk7XG4gICAgICAvLyB9XG5cbiAgICAgIHJfc2VydmljZS5wb3N0UmVjbHVzbyhudWV2b19yZWNsdXNvKS5zdWJzY3JpYmUocmVzcG9uc2UgPT4ge1xuICAgICAgICBleHBlY3QocmVzcG9uc2UpLnRvRXF1YWwobnVldm9fcmVjbHVzbyk7XG4gICAgICB9KTtcbiAgICBcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBjb250cm9sbGVyLmV4cGVjdE9uZSgnaHR0cDovL2xvY2FsaG9zdDo4MDgwL3JlY2x1c29zJyk7XG4gICAgICBleHBlY3QocmVxdWVzdC5yZXF1ZXN0Lm1ldGhvZCkudG9CZSgnUE9TVCcpO1xuICAgICAgZXhwZWN0KHJlcXVlc3QucmVxdWVzdC5ib2R5KS50b0VxdWFsKG51ZXZvX3JlY2x1c28pO1xuICAgIFxuICAgICAgcmVxdWVzdC5mbHVzaChudWV2b19yZWNsdXNvKTtcbiAgICB9KVxuXG59KVxuXG4iXSwidmVyc2lvbiI6M30=