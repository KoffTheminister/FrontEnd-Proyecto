46a43e80da5c48e3f6a923106dfb0d87
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const testing_1 = require("@angular/common/http/testing");
const testing_2 = require("@angular/core/testing");
const reclusos_service_1 = require("./reclusos.service");
describe('ReclusoService tests', () => {
    let r_service;
    let controller;
    let nuevo_recluso = {
        "nombre": "Brittney",
        "apellido": "Spears",
        "dni": 2020752,
        "fecha_nac": "2004-01-01"
    };
    let unos_reclusos = [
        {
            "cod_recluso": 1,
            "nombre": "Juan",
            "apellido": "Macron",
            "dni": 2020202,
            "fecha_nac": "2004-01-01"
        },
        {
            "cod_recluso": 2,
            "nombre": "Estevan",
            "apellido": "Quito",
            "dni": 2020203,
            "fecha_nac": "2004-01-01"
        },
        {
            "cod_recluso": 3,
            "nombre": "Carlos",
            "apellido": "Fredicksen",
            "dni": 2020204,
            "fecha_nac": "2004-01-01"
        }
    ];
    beforeEach(async () => {
        testing_2.TestBed.configureTestingModule({
            imports: [
                testing_1.HttpClientTestingModule //NO borrar esta parte
            ],
            providers: [
                reclusos_service_1.ReclusosService,
            ]
        });
        r_service = testing_2.TestBed.inject(reclusos_service_1.ReclusosService);
        controller = testing_2.TestBed.inject(testing_1.HttpTestingController);
    });
    it('deberia crear un servicio', () => {
        expect(r_service).toBeTruthy();
    });
    it('deberia devolver un solo recluso', () => {
        let cod_recluso = 2;
        r_service.getOneRecluso(cod_recluso).subscribe(response => {
            let recluso = unos_reclusos[0];
            expect(recluso.nombre).toEqual('Juan');
            expect(recluso.apellido).toEqual('Macron');
        });
        const request = controller.expectOne("http://localhost:8080/reclusos/" + `${cod_recluso}`);
        request.flush(unos_reclusos[0]);
    });
    it('deberia devolver todos los reclusos', () => {
        r_service.getReclusos().subscribe(response => {
            expect(unos_reclusos.length).toBeGreaterThan(0);
        });
        const request = controller.expectOne("http://localhost:8080/reclusos");
        request.flush(unos_reclusos);
    });
    it('deberia crear un recluso', () => {
        // postRecluso(x:any){
        //   return this.http.post<any|JSON>("http://localhost:8080/reclusos/", x);
        // }
        r_service.postRecluso(nuevo_recluso).subscribe(response => {
            expect(response).toEqual(nuevo_recluso);
        });
        const request = controller.expectOne('http://localhost:8080/reclusos/');
        expect(request.request.method).toBe('POST');
        expect(request.request.body).toEqual(nuevo_recluso);
        request.flush(nuevo_recluso);
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvdGVuZXQ3NzUwL3RwZGVzYXJyb2xsb2ZlL0xpYmVydGFkbnQtRnJvbnRFbmQvc3JjL2FwcC9yZWNsdXNvcy9yZWNsdXNvcy5zZXJ2aWNlLnNwZWMudHMiLCJtYXBwaW5ncyI6Ijs7QUFBQSwwREFBNkY7QUFDN0YsbURBQStDO0FBQy9DLHlEQUFvRDtBQUdwRCxRQUFRLENBQUMsc0JBQXNCLEVBQUUsR0FBRyxFQUFFO0lBQ2xDLElBQUksU0FBMEIsQ0FBQTtJQUM5QixJQUFJLFVBQWlDLENBQUE7SUFDckMsSUFBSSxhQUFhLEdBQUc7UUFDbEIsUUFBUSxFQUFFLFVBQVU7UUFDcEIsVUFBVSxFQUFFLFFBQVE7UUFDcEIsS0FBSyxFQUFFLE9BQU87UUFDZCxXQUFXLEVBQUUsWUFBWTtLQUMxQixDQUFBO0lBQ0QsSUFBSSxhQUFhLEdBQUc7UUFDbEI7WUFDRSxhQUFhLEVBQUUsQ0FBQztZQUNoQixRQUFRLEVBQUUsTUFBTTtZQUNoQixVQUFVLEVBQUUsUUFBUTtZQUNwQixLQUFLLEVBQUUsT0FBTztZQUNkLFdBQVcsRUFBRSxZQUFZO1NBQzFCO1FBQ0Q7WUFDRSxhQUFhLEVBQUUsQ0FBQztZQUNoQixRQUFRLEVBQUUsU0FBUztZQUNuQixVQUFVLEVBQUUsT0FBTztZQUNuQixLQUFLLEVBQUUsT0FBTztZQUNkLFdBQVcsRUFBRSxZQUFZO1NBQzFCO1FBQ0Q7WUFDRSxhQUFhLEVBQUUsQ0FBQztZQUNoQixRQUFRLEVBQUUsUUFBUTtZQUNsQixVQUFVLEVBQUUsWUFBWTtZQUN4QixLQUFLLEVBQUUsT0FBTztZQUNkLFdBQVcsRUFBRSxZQUFZO1NBQzFCO0tBQ0YsQ0FBQTtJQUVELFVBQVUsQ0FBQyxLQUFLLElBQUksRUFBRTtRQUNwQixpQkFBTyxDQUFDLHNCQUFzQixDQUFDO1lBQzNCLE9BQU8sRUFBRTtnQkFDTCxpQ0FBdUIsQ0FBQyxzQkFBc0I7YUFDakQ7WUFDRCxTQUFTLEVBQUU7Z0JBQ1Qsa0NBQWU7YUFDaEI7U0FDSixDQUFDLENBQUE7UUFFRixTQUFTLEdBQUcsaUJBQU8sQ0FBQyxNQUFNLENBQUMsa0NBQWUsQ0FBQyxDQUFBO1FBQzNDLFVBQVUsR0FBRyxpQkFBTyxDQUFDLE1BQU0sQ0FBQywrQkFBcUIsQ0FBQyxDQUFBO0lBQ3BELENBQUMsQ0FBQyxDQUFBO0lBRUYsRUFBRSxDQUFDLDJCQUEyQixFQUFFLEdBQUcsRUFBRTtRQUNuQyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsVUFBVSxFQUFFLENBQUE7SUFDaEMsQ0FBQyxDQUFDLENBQUE7SUFFRixFQUFFLENBQUMsa0NBQWtDLEVBQUUsR0FBRyxFQUFFO1FBQzFDLElBQUksV0FBVyxHQUFHLENBQUMsQ0FBQTtRQUNuQixTQUFTLENBQUMsYUFBYSxDQUFDLFdBQVcsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUN4RCxJQUFJLE9BQU8sR0FBRyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUE7WUFDOUIsTUFBTSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUE7WUFDdEMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUE7UUFDNUMsQ0FBQyxDQUFDLENBQUE7UUFFRixNQUFNLE9BQU8sR0FBRyxVQUFVLENBQUMsU0FBUyxDQUFDLGlDQUFpQyxHQUFDLEdBQUcsV0FBVyxFQUFFLENBQUMsQ0FBQTtRQUN4RixPQUFPLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO0lBQ2pDLENBQUMsQ0FBQyxDQUFBO0lBRUYsRUFBRSxDQUFDLHFDQUFxQyxFQUFFLEdBQUcsRUFBRTtRQUM3QyxTQUFTLENBQUMsV0FBVyxFQUFFLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxFQUFFO1lBQzNDLE1BQU0sQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFBO1FBQ2pELENBQUMsQ0FBQyxDQUFBO1FBQ0YsTUFBTSxPQUFPLEdBQUcsVUFBVSxDQUFDLFNBQVMsQ0FBQyxnQ0FBZ0MsQ0FBQyxDQUFBO1FBQ3RFLE9BQU8sQ0FBQyxLQUFLLENBQUMsYUFBYSxDQUFDLENBQUE7SUFDOUIsQ0FBQyxDQUFDLENBQUE7SUFFRixFQUFFLENBQUMsMEJBQTBCLEVBQUUsR0FBRyxFQUFFO1FBQ2xDLHNCQUFzQjtRQUN0QiwyRUFBMkU7UUFDM0UsSUFBSTtRQUVKLFNBQVMsQ0FBQyxXQUFXLENBQUMsYUFBYSxDQUFDLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxFQUFFO1lBQ3hELE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLENBQUM7UUFDMUMsQ0FBQyxDQUFDLENBQUM7UUFFSCxNQUFNLE9BQU8sR0FBRyxVQUFVLENBQUMsU0FBUyxDQUFDLGlDQUFpQyxDQUFDLENBQUM7UUFDeEUsTUFBTSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQzVDLE1BQU0sQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUVwRCxPQUFPLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQyxDQUFDO0lBQy9CLENBQUMsQ0FBQyxDQUFBO0FBRU4sQ0FBQyxDQUFDLENBQUEiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL2hvbWUvdGVuZXQ3NzUwL3RwZGVzYXJyb2xsb2ZlL0xpYmVydGFkbnQtRnJvbnRFbmQvc3JjL2FwcC9yZWNsdXNvcy9yZWNsdXNvcy5zZXJ2aWNlLnNwZWMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSHR0cENsaWVudFRlc3RpbmdNb2R1bGUsIEh0dHBUZXN0aW5nQ29udHJvbGxlciB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwL3Rlc3RpbmcnXG5pbXBvcnQgeyBUZXN0QmVkIH0gZnJvbSBcIkBhbmd1bGFyL2NvcmUvdGVzdGluZ1wiXG5pbXBvcnQgeyBSZWNsdXNvc1NlcnZpY2UgfSBmcm9tICcuL3JlY2x1c29zLnNlcnZpY2UnXG5pbXBvcnQgeyBzZXJ2aWNlc1ZlcnNpb24gfSBmcm9tICd0eXBlc2NyaXB0JztcblxuZGVzY3JpYmUoJ1JlY2x1c29TZXJ2aWNlIHRlc3RzJywgKCkgPT4ge1xuICAgIGxldCByX3NlcnZpY2U6IFJlY2x1c29zU2VydmljZVxuICAgIGxldCBjb250cm9sbGVyOiBIdHRwVGVzdGluZ0NvbnRyb2xsZXJcbiAgICBsZXQgbnVldm9fcmVjbHVzbyA9IHtcbiAgICAgIFwibm9tYnJlXCI6IFwiQnJpdHRuZXlcIixcbiAgICAgIFwiYXBlbGxpZG9cIjogXCJTcGVhcnNcIixcbiAgICAgIFwiZG5pXCI6IDIwMjA3NTIsXG4gICAgICBcImZlY2hhX25hY1wiOiBcIjIwMDQtMDEtMDFcIlxuICAgIH1cbiAgICBsZXQgdW5vc19yZWNsdXNvcyA9IFtcbiAgICAgIHtcbiAgICAgICAgXCJjb2RfcmVjbHVzb1wiOiAxLFxuICAgICAgICBcIm5vbWJyZVwiOiBcIkp1YW5cIixcbiAgICAgICAgXCJhcGVsbGlkb1wiOiBcIk1hY3JvblwiLFxuICAgICAgICBcImRuaVwiOiAyMDIwMjAyLFxuICAgICAgICBcImZlY2hhX25hY1wiOiBcIjIwMDQtMDEtMDFcIlxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgXCJjb2RfcmVjbHVzb1wiOiAyLFxuICAgICAgICBcIm5vbWJyZVwiOiBcIkVzdGV2YW5cIixcbiAgICAgICAgXCJhcGVsbGlkb1wiOiBcIlF1aXRvXCIsXG4gICAgICAgIFwiZG5pXCI6IDIwMjAyMDMsXG4gICAgICAgIFwiZmVjaGFfbmFjXCI6IFwiMjAwNC0wMS0wMVwiXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBcImNvZF9yZWNsdXNvXCI6IDMsXG4gICAgICAgIFwibm9tYnJlXCI6IFwiQ2FybG9zXCIsXG4gICAgICAgIFwiYXBlbGxpZG9cIjogXCJGcmVkaWNrc2VuXCIsXG4gICAgICAgIFwiZG5pXCI6IDIwMjAyMDQsXG4gICAgICAgIFwiZmVjaGFfbmFjXCI6IFwiMjAwNC0wMS0wMVwiXG4gICAgICB9XG4gICAgXVxuXG4gICAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gICAgICBUZXN0QmVkLmNvbmZpZ3VyZVRlc3RpbmdNb2R1bGUoe1xuICAgICAgICAgIGltcG9ydHM6IFtcbiAgICAgICAgICAgICAgSHR0cENsaWVudFRlc3RpbmdNb2R1bGUgLy9OTyBib3JyYXIgZXN0YSBwYXJ0ZVxuICAgICAgICAgIF0sXG4gICAgICAgICAgcHJvdmlkZXJzOiBbXG4gICAgICAgICAgICBSZWNsdXNvc1NlcnZpY2UsXG4gICAgICAgICAgXVxuICAgICAgfSlcblxuICAgICAgcl9zZXJ2aWNlID0gVGVzdEJlZC5pbmplY3QoUmVjbHVzb3NTZXJ2aWNlKVxuICAgICAgY29udHJvbGxlciA9IFRlc3RCZWQuaW5qZWN0KEh0dHBUZXN0aW5nQ29udHJvbGxlcilcbiAgICB9KVxuXG4gICAgaXQoJ2RlYmVyaWEgY3JlYXIgdW4gc2VydmljaW8nLCAoKSA9PiB7XG4gICAgICBleHBlY3Qocl9zZXJ2aWNlKS50b0JlVHJ1dGh5KClcbiAgICB9KVxuXG4gICAgaXQoJ2RlYmVyaWEgZGV2b2x2ZXIgdW4gc29sbyByZWNsdXNvJywgKCkgPT4ge1xuICAgICAgbGV0IGNvZF9yZWNsdXNvID0gMlxuICAgICAgcl9zZXJ2aWNlLmdldE9uZVJlY2x1c28oY29kX3JlY2x1c28pLnN1YnNjcmliZShyZXNwb25zZSA9PiB7XG4gICAgICAgIGxldCByZWNsdXNvID0gdW5vc19yZWNsdXNvc1swXVxuICAgICAgICBleHBlY3QocmVjbHVzby5ub21icmUpLnRvRXF1YWwoJ0p1YW4nKVxuICAgICAgICBleHBlY3QocmVjbHVzby5hcGVsbGlkbykudG9FcXVhbCgnTWFjcm9uJylcbiAgICAgIH0pXG5cbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBjb250cm9sbGVyLmV4cGVjdE9uZShcImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9yZWNsdXNvcy9cIitgJHtjb2RfcmVjbHVzb31gKVxuICAgICAgcmVxdWVzdC5mbHVzaCh1bm9zX3JlY2x1c29zWzBdKVxuICAgIH0pXG5cbiAgICBpdCgnZGViZXJpYSBkZXZvbHZlciB0b2RvcyBsb3MgcmVjbHVzb3MnLCAoKSA9PiB7XG4gICAgICByX3NlcnZpY2UuZ2V0UmVjbHVzb3MoKS5zdWJzY3JpYmUocmVzcG9uc2UgPT4ge1xuICAgICAgICBleHBlY3QodW5vc19yZWNsdXNvcy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKVxuICAgICAgfSlcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBjb250cm9sbGVyLmV4cGVjdE9uZShcImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9yZWNsdXNvc1wiKVxuICAgICAgcmVxdWVzdC5mbHVzaCh1bm9zX3JlY2x1c29zKVxuICAgIH0pXG5cbiAgICBpdCgnZGViZXJpYSBjcmVhciB1biByZWNsdXNvJywgKCkgPT4ge1xuICAgICAgLy8gcG9zdFJlY2x1c28oeDphbnkpe1xuICAgICAgLy8gICByZXR1cm4gdGhpcy5odHRwLnBvc3Q8YW55fEpTT04+KFwiaHR0cDovL2xvY2FsaG9zdDo4MDgwL3JlY2x1c29zL1wiLCB4KTtcbiAgICAgIC8vIH1cblxuICAgICAgcl9zZXJ2aWNlLnBvc3RSZWNsdXNvKG51ZXZvX3JlY2x1c28pLnN1YnNjcmliZShyZXNwb25zZSA9PiB7XG4gICAgICAgIGV4cGVjdChyZXNwb25zZSkudG9FcXVhbChudWV2b19yZWNsdXNvKTtcbiAgICAgIH0pO1xuICAgIFxuICAgICAgY29uc3QgcmVxdWVzdCA9IGNvbnRyb2xsZXIuZXhwZWN0T25lKCdodHRwOi8vbG9jYWxob3N0OjgwODAvcmVjbHVzb3MvJyk7XG4gICAgICBleHBlY3QocmVxdWVzdC5yZXF1ZXN0Lm1ldGhvZCkudG9CZSgnUE9TVCcpO1xuICAgICAgZXhwZWN0KHJlcXVlc3QucmVxdWVzdC5ib2R5KS50b0VxdWFsKG51ZXZvX3JlY2x1c28pO1xuICAgIFxuICAgICAgcmVxdWVzdC5mbHVzaChudWV2b19yZWNsdXNvKTtcbiAgICB9KVxuXG59KVxuXG4iXSwidmVyc2lvbiI6M30=